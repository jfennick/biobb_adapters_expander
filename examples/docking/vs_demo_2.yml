steps:
- setup_pdb.yml:
    in:
      pdb_id: 1ntp
      pdb_path: '&pdb.pdbqt'
      box_path: '&box.pdb'
      water_type: spce
      force_field: amber99sb-ildn
- download_ligand_database:
    in:
      database: /NCIOpen.sdf
- extract_molecules_sdf:
    in:
      first_molecule: 1
      last_molecule: 1
- generate_conformers_sdf:
- assign_partial_charges.yml:
- split_pdbqt:
- autodock_vina_batch:
    in:
      input_receptor_pdbqt_path: '*pdb.pdbqt'
      input_box_path: '*box.pdb'
      output_log_path: '&vina.log'
- split_pdbqt:
    scatter: [input_path]
- autodock_vina_filter:
    in:
      input_log_path: '*vina.log'
      docking_score_cutoff: -4.0
      max_num_poses_per_ligand: 1
      max_num_poses_total: 1
- gen_topol_params.yml:
    scatter: [pdbqt_path]
- stability.yml:
    scatter: [crd_path, top_zip_path]
    scatterMethod: dotproduct

wic:
  steps:
    (1, setup_pdb.yml):
      wic:
        inlineable: False
    (3, extract_molecules_sdf):
      wic:
        graphviz:
          label: Choose Ligands from\nCheminformatics Database
    (5, assign_partial_charges.yml):
      wic:
        inlineable: False
    (10, gen_topol_params.yml):
      wic:
        inlineable: False
    (11, stability.yml):
      wic:
        inlineable: False
