steps:
# Ligand
# NOTE: Searching for conformers tends to cause the ligand to curl up into a ball.
# Although this lowers its energy in isolation, the decreased surface area tends
# to weaken the binding free energy! (as reported by autodock vina)
  - flc.yml:
#  - minimize_ligand_only.yml:

# NOTE: We converted to mol2 format above because it allows explicit charges.
# Thus, if we only infer charges once and then preserve them, we don't have to
# worry about using different charges in autodock vs molecular dynamics.
# It also stores explicit bond order info, so the topology will be identical.
# (Also note that we did NOT convert to pdb and then to pdbqt, because that loses both!)

# NOTE: Rename all residues to MOL before calling acpypye. Otherwise, acpype crashes with:
# "ERROR: more than one residue detected '{'UNL', 'MOL'}'"
  - python3_mol2_to_mol2:
      in:
        script: /rename_residues_MOL.py # NOTE: Initial / required
        input_mol2_path: '*ligand_min.mol2'
        output_mol2_path: '&conformer.mol2'

# Docking
  - convert_ligand_mol2_to_pdbqt_obabel.yml:
#  - convert_ligand_mol2_to_pdbqt_mdanalysis.yml: # generates ligand_rigid.pdbqt only